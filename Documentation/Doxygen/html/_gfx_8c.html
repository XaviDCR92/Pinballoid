<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pinballoid: Gfx.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Pinballoid
   </div>
   <div id="projectbrief">Open-source PlayStation 1 video game</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_gfx_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Gfx.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of Gfx module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_gfx_8h_source.html">Gfx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_i_o_8h_source.html">IO.h</a>&quot;</code><br />
<code>#include &lt;psx.h&gt;</code><br />
<code>#include &lt;psxgpu.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;thread.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
</div>
<p><a href="_gfx_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a936466f5b81ac511dc91604521f828e5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gfx_8c.html#a936466f5b81ac511dc91604521f828e5">MAX_SIZE_FOR_GSSPRITE</a>&#160;&#160;&#160;((short)0xFF)</td></tr>
<tr class="memdesc:a936466f5b81ac511dc91604521f828e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum size for a GsSprite instance supported by PSX hardware.  <a href="#a936466f5b81ac511dc91604521f828e5">More...</a><br /></td></tr>
<tr class="separator:a936466f5b81ac511dc91604521f828e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8d2a72095f166a26606a5d96cb7c2706"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gfx_8c.html#a8d2a72095f166a26606a5d96cb7c2706">GfxInitDrawEnv</a> (void)</td></tr>
<tr class="memdesc:a8d2a72095f166a26606a5d96cb7c2706"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization of PSX low-level drawing environment.  <a href="#a8d2a72095f166a26606a5d96cb7c2706">More...</a><br /></td></tr>
<tr class="separator:a8d2a72095f166a26606a5d96cb7c2706"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5752aa8fbeb2fd3a8423a25ff03f5a16"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gfx_8c.html#a5752aa8fbeb2fd3a8423a25ff03f5a16">GfxInitDispEnv</a> (void)</td></tr>
<tr class="memdesc:a5752aa8fbeb2fd3a8423a25ff03f5a16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization of PSX low-level display environment.  <a href="#a5752aa8fbeb2fd3a8423a25ff03f5a16">More...</a><br /></td></tr>
<tr class="separator:a5752aa8fbeb2fd3a8423a25ff03f5a16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f1c010ef7f6b7f933fa0f607c953b23"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gfx_8c.html#a9f1c010ef7f6b7f933fa0f607c953b23">GfxSwapBuffers</a> (void)</td></tr>
<tr class="memdesc:a9f1c010ef7f6b7f933fa0f607c953b23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs double buffering.  <a href="#a9f1c010ef7f6b7f933fa0f607c953b23">More...</a><br /></td></tr>
<tr class="separator:a9f1c010ef7f6b7f933fa0f607c953b23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5857b09e918d24ea68d34da8b16e667b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gfx_8c.html#a5857b09e918d24ea68d34da8b16e667b">GfxSortBigSprite</a> (GsSprite *const psSpr)</td></tr>
<tr class="memdesc:a5857b09e918d24ea68d34da8b16e667b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes big sprites (e.g.: more than 256 px wide) by drawing two separate primitives.  <a href="#a5857b09e918d24ea68d34da8b16e667b">More...</a><br /></td></tr>
<tr class="separator:a5857b09e918d24ea68d34da8b16e667b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a281940f9ef4f62b4f46be492c37f1bc9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gfx_8c.html#a281940f9ef4f62b4f46be492c37f1bc9">GfxSetPrimList</a> (void)</td></tr>
<tr class="memdesc:a281940f9ef4f62b4f46be492c37f1bc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets a pointer to a buffer which holds low-level primitive data, and performs double buffering so a secondary buffer can be used to calculate the new scene.  <a href="#a281940f9ef4f62b4f46be492c37f1bc9">More...</a><br /></td></tr>
<tr class="separator:a281940f9ef4f62b4f46be492c37f1bc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae12c39045683977189ae652180a4f078"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gfx_8c.html#ae12c39045683977189ae652180a4f078">ISR_VBlank</a> (void)</td></tr>
<tr class="memdesc:ae12c39045683977189ae652180a4f078"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is executed on VSYNC event.  <a href="#ae12c39045683977189ae652180a4f078">More...</a><br /></td></tr>
<tr class="separator:ae12c39045683977189ae652180a4f078"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fab7441831717fd86a09edb84e866e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gfx_8c.html#a7fab7441831717fd86a09edb84e866e2">GfxInit</a> (void)</td></tr>
<tr class="memdesc:a7fab7441831717fd86a09edb84e866e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization of Gfx module.  <a href="#a7fab7441831717fd86a09edb84e866e2">More...</a><br /></td></tr>
<tr class="separator:a7fab7441831717fd86a09edb84e866e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab288de79dcfcde0c4d41a9eeefae9300"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gfx_8c.html#ab288de79dcfcde0c4d41a9eeefae9300">GfxSpriteFromFile</a> (const char *const strFilePath, GsSprite *const pSpr)</td></tr>
<tr class="memdesc:ab288de79dcfcde0c4d41a9eeefae9300"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads data from file indicated by strFilePath, uploads it into VRAM and sets up a new GsSprite instance.  <a href="#ab288de79dcfcde0c4d41a9eeefae9300">More...</a><br /></td></tr>
<tr class="separator:ab288de79dcfcde0c4d41a9eeefae9300"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a299be2a90b2afdd1850fee728835acb6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gfx_8c.html#a299be2a90b2afdd1850fee728835acb6">GfxDrawScene</a> (void)</td></tr>
<tr class="memdesc:a299be2a90b2afdd1850fee728835acb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draws current primitive list into screen and performs double buffering.  <a href="#a299be2a90b2afdd1850fee728835acb6">More...</a><br /></td></tr>
<tr class="separator:a299be2a90b2afdd1850fee728835acb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe5a8470c1dff2d41b06cfd815635928"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gfx_8c.html#abe5a8470c1dff2d41b06cfd815635928">GfxIsInsideScreenArea</a> (const short x, const short y, const short w, const short h)</td></tr>
<tr class="memdesc:abe5a8470c1dff2d41b06cfd815635928"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates whether a rectangle defined by x, y, w and h is inside active drawing area or not.  <a href="#abe5a8470c1dff2d41b06cfd815635928">More...</a><br /></td></tr>
<tr class="separator:abe5a8470c1dff2d41b06cfd815635928"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41f30eb46c140f8058066c267cc6545d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gfx_8c.html#a41f30eb46c140f8058066c267cc6545d">GfxIsSpriteInsideScreenArea</a> (const GsSprite *const psSpr)</td></tr>
<tr class="memdesc:a41f30eb46c140f8058066c267cc6545d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates whether a tSprite instance is inside active drawing environment area.  <a href="#a41f30eb46c140f8058066c267cc6545d">More...</a><br /></td></tr>
<tr class="separator:a41f30eb46c140f8058066c267cc6545d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72f4e362f546c1b668eb247f09e7799e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gfx_8c.html#a72f4e362f546c1b668eb247f09e7799e">GfxSortSprite</a> (const GsSprite *const psSpr)</td></tr>
<tr class="memdesc:a72f4e362f546c1b668eb247f09e7799e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extracting information from tSprite instance, this function adds a low-level GsSprite structure into internal primitive list if inside drawing environment area.  <a href="#a72f4e362f546c1b668eb247f09e7799e">More...</a><br /></td></tr>
<tr class="separator:a72f4e362f546c1b668eb247f09e7799e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:abb76f0115d46d74894915a38e0f29498"><td class="memItemLeft" align="right" valign="top">static GsDrawEnv&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gfx_8c.html#abb76f0115d46d74894915a38e0f29498">sDrawEnv</a></td></tr>
<tr class="separator:abb76f0115d46d74894915a38e0f29498"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0fb7d0e979d92a1ad0c5f2a04722412"><td class="memItemLeft" align="right" valign="top">static GsDispEnv&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gfx_8c.html#af0fb7d0e979d92a1ad0c5f2a04722412">sDispEnv</a></td></tr>
<tr class="separator:af0fb7d0e979d92a1ad0c5f2a04722412"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fdcfdea7090bac4a1c93629c7bb7c7c"><td class="memItemLeft" align="right" valign="top">static volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gfx_8c.html#a9fdcfdea7090bac4a1c93629c7bb7c7c">bSyncFlag</a></td></tr>
<tr class="separator:a9fdcfdea7090bac4a1c93629c7bb7c7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of Gfx module. </p>
<dl class="section author"><dt>Author</dt><dd>Xavier Del Campo </dd></dl>

<p class="definition">Definition in file <a class="el" href="_gfx_8c_source.html">Gfx.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a936466f5b81ac511dc91604521f828e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a936466f5b81ac511dc91604521f828e5">&#9670;&nbsp;</a></span>MAX_SIZE_FOR_GSSPRITE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_SIZE_FOR_GSSPRITE&#160;&#160;&#160;((short)0xFF)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum size for a GsSprite instance supported by PSX hardware. </p>
<p>Even if user can use big sprites e.g.: 384x240 px, PSX hardware can only support up to 255x255 px primitives. Bigger sprites are then split into two primitives and drawn separately.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="_gfx_8c.html#a72f4e362f546c1b668eb247f09e7799e" title="Extracting information from tSprite instance, this function adds a low-level GsSprite structure into ...">GfxSortSprite()</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_gfx_8c_source.html#l00042">42</a> of file <a class="el" href="_gfx_8c_source.html">Gfx.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a299be2a90b2afdd1850fee728835acb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a299be2a90b2afdd1850fee728835acb6">&#9670;&nbsp;</a></span>GfxDrawScene()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GfxDrawScene </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Draws current primitive list into screen and performs double buffering. </p>
<dl class="section remark"><dt>Remarks</dt><dd>Blocking function. This function waits for GPU to be free and GPU VSYNC IRQ flag to be set. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_gfx_8c_source.html#l00205">205</a> of file <a class="el" href="_gfx_8c_source.html">Gfx.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;{</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">/* Hold program execution until VSYNC flag is set</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">     * and GPU is ready to work. */</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">while</span> ( (<a class="code" href="_gfx_8c.html#a9fdcfdea7090bac4a1c93629c7bb7c7c">bSyncFlag</a> == <span class="keyword">false</span>)</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                    ||</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            (GsIsDrawing() != <span class="keyword">false</span>)    );</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">/* Reset VSYNC event flag. */</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="_gfx_8c.html#a9fdcfdea7090bac4a1c93629c7bb7c7c">bSyncFlag</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">/* Swap drawing and display enviroments Y position. */</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="_gfx_8c.html#a9f1c010ef7f6b7f933fa0f607c953b23">GfxSwapBuffers</a>();</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">/* Draw all primitives into screen. */</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    GsDrawList();</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="comment">/* Swap low-level primitive data buffers. */</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="_gfx_8c.html#a281940f9ef4f62b4f46be492c37f1bc9">GfxSetPrimList</a>();</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div><div class="ttc" id="_gfx_8c_html_a9fdcfdea7090bac4a1c93629c7bb7c7c"><div class="ttname"><a href="_gfx_8c.html#a9fdcfdea7090bac4a1c93629c7bb7c7c">bSyncFlag</a></div><div class="ttdeci">static volatile bool bSyncFlag</div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00067">Gfx.c:67</a></div></div>
<div class="ttc" id="_gfx_8c_html_a281940f9ef4f62b4f46be492c37f1bc9"><div class="ttname"><a href="_gfx_8c.html#a281940f9ef4f62b4f46be492c37f1bc9">GfxSetPrimList</a></div><div class="ttdeci">static void GfxSetPrimList(void)</div><div class="ttdoc">This function sets a pointer to a buffer which holds low-level primitive data, and performs double bu...</div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00426">Gfx.c:426</a></div></div>
<div class="ttc" id="_gfx_8c_html_a9f1c010ef7f6b7f933fa0f607c953b23"><div class="ttname"><a href="_gfx_8c.html#a9f1c010ef7f6b7f933fa0f607c953b23">GfxSwapBuffers</a></div><div class="ttdeci">static void GfxSwapBuffers(void)</div><div class="ttdoc">Performs double buffering. </div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00464">Gfx.c:464</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7fab7441831717fd86a09edb84e866e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fab7441831717fd86a09edb84e866e2">&#9670;&nbsp;</a></span>GfxInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GfxInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialization of Gfx module. </p>
<dl class="section remark"><dt>Remarks</dt><dd>This is where PSX GPU and its interface get initialized. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_gfx_8c_source.html#l00091">91</a> of file <a class="el" href="_gfx_8c_source.html">Gfx.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;{</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">/* Graphics synthetiser (GPU) initialization. */</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    GsInit();</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">/* Clear VRAM. */</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    GsClearMem();</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#if ( (VIDEO_MODE == VMODE_PAL) || (VIDEO_MODE == VMODE_NSTC) )</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">/* Set Video Resolution. VIDEO_MODE can be either VMODE_PAL or VMODE_NTSC */</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    GsSetVideoMode(<a class="code" href="_gfx_8h.html#a06fc87d81c62e9abb8790b6e5713c55baafea7185585f9a73335f358814395083">X_SCREEN_RESOLUTION</a>, <a class="code" href="_gfx_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba25285dc2afc59de11c6d7a1daecb0c7a">Y_SCREEN_RESOLUTION</a>, VIDEO_MODE);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* ( (VIDEO_MODE == VMODE_PAL) || (VIDEO_MODE == VMODE_NSTC) ) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">#error  &quot;Undefined VIDEO_MODE&quot;</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ( (VIDEO_MODE == VMODE_PAL) || (VIDEO_MODE == VMODE_NSTC) ) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">/* Set Drawing Environment. */</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="_gfx_8c.html#a8d2a72095f166a26606a5d96cb7c2706">GfxInitDrawEnv</a>();</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">/* Set Display Environment. */</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="_gfx_8c.html#a5752aa8fbeb2fd3a8423a25ff03f5a16">GfxInitDispEnv</a>();</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">/* Set primitive list. */</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="_gfx_8c.html#a281940f9ef4f62b4f46be492c37f1bc9">GfxSetPrimList</a>();</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">/* Set Vsync interrupt handler for screen refresh. */</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    SetVBlankHandler(&amp;<a class="code" href="_gfx_8c.html#ae12c39045683977189ae652180a4f078">ISR_VBlank</a>);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div><div class="ttc" id="_gfx_8c_html_a8d2a72095f166a26606a5d96cb7c2706"><div class="ttname"><a href="_gfx_8c.html#a8d2a72095f166a26606a5d96cb7c2706">GfxInitDrawEnv</a></div><div class="ttdeci">static void GfxInitDrawEnv(void)</div><div class="ttdoc">Initialization of PSX low-level drawing environment. </div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00385">Gfx.c:385</a></div></div>
<div class="ttc" id="_gfx_8c_html_a5752aa8fbeb2fd3a8423a25ff03f5a16"><div class="ttname"><a href="_gfx_8c.html#a5752aa8fbeb2fd3a8423a25ff03f5a16">GfxInitDispEnv</a></div><div class="ttdeci">static void GfxInitDispEnv(void)</div><div class="ttdoc">Initialization of PSX low-level display environment. </div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00409">Gfx.c:409</a></div></div>
<div class="ttc" id="_gfx_8h_html_a06fc87d81c62e9abb8790b6e5713c55ba25285dc2afc59de11c6d7a1daecb0c7a"><div class="ttname"><a href="_gfx_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba25285dc2afc59de11c6d7a1daecb0c7a">Y_SCREEN_RESOLUTION</a></div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8h_source.html#l00043">Gfx.h:43</a></div></div>
<div class="ttc" id="_gfx_8c_html_ae12c39045683977189ae652180a4f078"><div class="ttname"><a href="_gfx_8c.html#ae12c39045683977189ae652180a4f078">ISR_VBlank</a></div><div class="ttdeci">static void ISR_VBlank(void)</div><div class="ttdoc">This function is executed on VSYNC event. </div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00498">Gfx.c:498</a></div></div>
<div class="ttc" id="_gfx_8h_html_a06fc87d81c62e9abb8790b6e5713c55baafea7185585f9a73335f358814395083"><div class="ttname"><a href="_gfx_8h.html#a06fc87d81c62e9abb8790b6e5713c55baafea7185585f9a73335f358814395083">X_SCREEN_RESOLUTION</a></div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8h_source.html#l00042">Gfx.h:42</a></div></div>
<div class="ttc" id="_gfx_8c_html_a281940f9ef4f62b4f46be492c37f1bc9"><div class="ttname"><a href="_gfx_8c.html#a281940f9ef4f62b4f46be492c37f1bc9">GfxSetPrimList</a></div><div class="ttdeci">static void GfxSetPrimList(void)</div><div class="ttdoc">This function sets a pointer to a buffer which holds low-level primitive data, and performs double bu...</div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00426">Gfx.c:426</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5752aa8fbeb2fd3a8423a25ff03f5a16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5752aa8fbeb2fd3a8423a25ff03f5a16">&#9670;&nbsp;</a></span>GfxInitDispEnv()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void GfxInitDispEnv </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialization of PSX low-level display environment. </p>
<p>The display environment is a rectangle describing VRAM (video RAM) active display area.</p>
<dl class="section remark"><dt>Remarks</dt><dd>Not to be confused with drawing environment, which is a rectangle where primitives are drawn on. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_gfx_8c_source.html#l00409">409</a> of file <a class="el" href="_gfx_8c_source.html">Gfx.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;{</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">/* Initialize display environment default values. */</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="_gfx_8c.html#af0fb7d0e979d92a1ad0c5f2a04722412">sDispEnv</a>.x = 0;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <a class="code" href="_gfx_8c.html#af0fb7d0e979d92a1ad0c5f2a04722412">sDispEnv</a>.y = 0;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="comment">/* Initialize display environment. */</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    GsSetDispEnv(&amp;<a class="code" href="_gfx_8c.html#af0fb7d0e979d92a1ad0c5f2a04722412">sDispEnv</a>);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div><div class="ttc" id="_gfx_8c_html_af0fb7d0e979d92a1ad0c5f2a04722412"><div class="ttname"><a href="_gfx_8c.html#af0fb7d0e979d92a1ad0c5f2a04722412">sDispEnv</a></div><div class="ttdeci">static GsDispEnv sDispEnv</div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00064">Gfx.c:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8d2a72095f166a26606a5d96cb7c2706"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d2a72095f166a26606a5d96cb7c2706">&#9670;&nbsp;</a></span>GfxInitDrawEnv()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void GfxInitDrawEnv </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialization of PSX low-level drawing environment. </p>
<p>The drawing environment is a rectangle where primitives are drawn on.</p>
<dl class="section remark"><dt>Remarks</dt><dd>Not to be confused with display environment, which is a rectangle showing VRAM active display area. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_gfx_8c_source.html#l00385">385</a> of file <a class="el" href="_gfx_8c_source.html">Gfx.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;{</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">/* Initialize drawing environment default values. */</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="_gfx_8c.html#abb76f0115d46d74894915a38e0f29498">sDrawEnv</a>.x = 0;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <a class="code" href="_gfx_8c.html#abb76f0115d46d74894915a38e0f29498">sDrawEnv</a>.y = 0;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <a class="code" href="_gfx_8c.html#abb76f0115d46d74894915a38e0f29498">sDrawEnv</a>.draw_on_display = <span class="keyword">false</span>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="_gfx_8c.html#abb76f0115d46d74894915a38e0f29498">sDrawEnv</a>.w = <a class="code" href="_gfx_8h.html#a06fc87d81c62e9abb8790b6e5713c55baafea7185585f9a73335f358814395083">X_SCREEN_RESOLUTION</a>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="_gfx_8c.html#abb76f0115d46d74894915a38e0f29498">sDrawEnv</a>.h = <a class="code" href="_gfx_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba25285dc2afc59de11c6d7a1daecb0c7a">Y_SCREEN_RESOLUTION</a>;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="comment">/* Initialize drawing environment. */</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    GsSetDrawEnv(&amp;<a class="code" href="_gfx_8c.html#abb76f0115d46d74894915a38e0f29498">sDrawEnv</a>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;}</div><div class="ttc" id="_gfx_8h_html_a06fc87d81c62e9abb8790b6e5713c55ba25285dc2afc59de11c6d7a1daecb0c7a"><div class="ttname"><a href="_gfx_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba25285dc2afc59de11c6d7a1daecb0c7a">Y_SCREEN_RESOLUTION</a></div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8h_source.html#l00043">Gfx.h:43</a></div></div>
<div class="ttc" id="_gfx_8h_html_a06fc87d81c62e9abb8790b6e5713c55baafea7185585f9a73335f358814395083"><div class="ttname"><a href="_gfx_8h.html#a06fc87d81c62e9abb8790b6e5713c55baafea7185585f9a73335f358814395083">X_SCREEN_RESOLUTION</a></div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8h_source.html#l00042">Gfx.h:42</a></div></div>
<div class="ttc" id="_gfx_8c_html_abb76f0115d46d74894915a38e0f29498"><div class="ttname"><a href="_gfx_8c.html#abb76f0115d46d74894915a38e0f29498">sDrawEnv</a></div><div class="ttdeci">static GsDrawEnv sDrawEnv</div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00059">Gfx.c:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abe5a8470c1dff2d41b06cfd815635928"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe5a8470c1dff2d41b06cfd815635928">&#9670;&nbsp;</a></span>GfxIsInsideScreenArea()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool GfxIsInsideScreenArea </td>
          <td>(</td>
          <td class="paramtype">const short&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const short&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const short&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const short&#160;</td>
          <td class="paramname"><em>h</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates whether a rectangle defined by x, y, w and h is inside active drawing area or not. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Rectangle initial X offset.</td></tr>
    <tr><td class="paramname">y</td><td>Rectangle initial X offset.</td></tr>
    <tr><td class="paramname">w</td><td>Rectangle width.</td></tr>
    <tr><td class="paramname">h</td><td>Rectangle height.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns true if rectangle defined by input parameters is inside screen area, false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_gfx_8c_source.html#l00247">247</a> of file <a class="el" href="_gfx_8c_source.html">Gfx.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;{</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">if</span> (    ( (x + w) &gt;= 0)</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                &amp;&amp;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            (x &lt; <a class="code" href="_gfx_8c.html#abb76f0115d46d74894915a38e0f29498">sDrawEnv</a>.w)</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                &amp;&amp;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            ( (y + h) &gt;= 0)</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                &amp;&amp;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            (y &lt; <a class="code" href="_gfx_8c.html#abb76f0115d46d74894915a38e0f29498">sDrawEnv</a>.h) )</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="comment">/* Rectangle is inside drawing environment area. */</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="comment">/* Rectangle is outside drawing environment area.</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">         * Fall through. */</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">/* Return failure code if reached here. */</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div><div class="ttc" id="_gfx_8c_html_abb76f0115d46d74894915a38e0f29498"><div class="ttname"><a href="_gfx_8c.html#abb76f0115d46d74894915a38e0f29498">sDrawEnv</a></div><div class="ttdeci">static GsDrawEnv sDrawEnv</div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00059">Gfx.c:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a41f30eb46c140f8058066c267cc6545d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41f30eb46c140f8058066c267cc6545d">&#9670;&nbsp;</a></span>GfxIsSpriteInsideScreenArea()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool GfxIsSpriteInsideScreenArea </td>
          <td>(</td>
          <td class="paramtype">const GsSprite *const&#160;</td>
          <td class="paramname"><em>psSpr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates whether a tSprite instance is inside active drawing environment area. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">psSpr</td><td>Pointer to tSprite structure. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_gfx_8c_source.html#l00279">279</a> of file <a class="el" href="_gfx_8c_source.html">Gfx.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;{</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">/* Define X/Y and width/height parameters. */</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">short</span> x = psSpr-&gt;x;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">short</span> y = psSpr-&gt;y;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">short</span> w = psSpr-&gt;w;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">short</span> h = psSpr-&gt;h;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">/* Return results. */</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="_gfx_8c.html#abe5a8470c1dff2d41b06cfd815635928">GfxIsInsideScreenArea</a>(x, y, w, h);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div><div class="ttc" id="_gfx_8c_html_abe5a8470c1dff2d41b06cfd815635928"><div class="ttname"><a href="_gfx_8c.html#abe5a8470c1dff2d41b06cfd815635928">GfxIsInsideScreenArea</a></div><div class="ttdeci">bool GfxIsInsideScreenArea(const short x, const short y, const short w, const short h)</div><div class="ttdoc">Indicates whether a rectangle defined by x, y, w and h is inside active drawing area or not...</div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00247">Gfx.c:247</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a281940f9ef4f62b4f46be492c37f1bc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a281940f9ef4f62b4f46be492c37f1bc9">&#9670;&nbsp;</a></span>GfxSetPrimList()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void GfxSetPrimList </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function sets a pointer to a buffer which holds low-level primitive data, and performs double buffering so a secondary buffer can be used to calculate the new scene. </p>

<p class="definition">Definition at line <a class="el" href="_gfx_8c_source.html#l00426">426</a> of file <a class="el" href="_gfx_8c_source.html">Gfx.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;{</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keyword">enum</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="comment">/* Maximum amount of each low-level primitive data buffer. */</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        PRIMITIVE_LIST_SIZE = 0x400</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    };</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">/* Buffer that will hold all primitive low-level data. */</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keyword">static</span> uint32_t au32PrimList1[PRIMITIVE_LIST_SIZE];</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="comment">/* Secondary buffer with the same purpose as au32PrimList1. */</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keyword">static</span> uint32_t au32PrimList2[PRIMITIVE_LIST_SIZE];</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment">/* This flag is reversed each time this function is called,</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">     * so that only one buffer is used at a time. */</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> bPrimListUsed;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="comment">/* Select buffer depending on bPrimListUsed. */</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    uint32_t* <span class="keyword">const</span> pu32PrimList = bPrimListUsed ? au32PrimList1 : au32PrimList2;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">/* Set Primitive List. */</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    GsSetList(pu32PrimList);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="comment">/* Invert bPrimListUsed state. */</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    bPrimListUsed = bPrimListUsed ? true : <span class="keyword">false</span>;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a5857b09e918d24ea68d34da8b16e667b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5857b09e918d24ea68d34da8b16e667b">&#9670;&nbsp;</a></span>GfxSortBigSprite()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void GfxSortBigSprite </td>
          <td>(</td>
          <td class="paramtype">GsSprite *const&#160;</td>
          <td class="paramname"><em>psSpr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Processes big sprites (e.g.: more than 256 px wide) by drawing two separate primitives. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">psSpr</td><td>Pointer to low-level GsSprite structure (given by <a class="el" href="_gfx_8c.html#a72f4e362f546c1b668eb247f09e7799e">GfxSortSprite()</a>). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_gfx_8c_source.html#l00332">332</a> of file <a class="el" href="_gfx_8c_source.html">Gfx.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;{</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keyword">enum</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="comment">/* 64 = 2 ^ 5. */</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        GFX_TPAGE_WIDTH_BITSHIFT = 6</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    };</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">/* On the other hand, GsSprite instances bigger than</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">     * 256x256 px must be split into two primitives, so</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">     * GsSortSprite shall be called twice. */</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">/* Store original TPage, width and X data. */</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> aux_tpage = psSpr-&gt;tpage;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">short</span> aux_w = psSpr-&gt;w;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">short</span> aux_x = psSpr-&gt;x;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="comment">/* First primitive will be 256x256 px. */</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    psSpr-&gt;w = <a class="code" href="_gfx_8c.html#a936466f5b81ac511dc91604521f828e5">MAX_SIZE_FOR_GSSPRITE</a>;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">/* Render first primitive (256x256 px). */</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    GsSortSprite(psSpr);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">/* Second primitive will be:</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">     *  Width = Original Width - 256 px.</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">     *  Height = Original Height - 256 px. */</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    psSpr-&gt;x += <a class="code" href="_gfx_8c.html#a936466f5b81ac511dc91604521f828e5">MAX_SIZE_FOR_GSSPRITE</a>;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    psSpr-&gt;w = <a class="code" href="_gfx_8h.html#a06fc87d81c62e9abb8790b6e5713c55baafea7185585f9a73335f358814395083">X_SCREEN_RESOLUTION</a> - <a class="code" href="_gfx_8c.html#a936466f5b81ac511dc91604521f828e5">MAX_SIZE_FOR_GSSPRITE</a>;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">/* TPage must be increased as we are looking 256 px to</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">     * the right inside VRAM. Remember that TPages are 64x64 px. */</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    psSpr-&gt;tpage += MAX_SIZE_FOR_GSSPRITE &gt;&gt; GFX_TPAGE_WIDTH_BITSHIFT;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">/* Render second primitive. */</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    GsSortSprite(psSpr);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="comment">/* Restore original TPage, width and X values. */</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    psSpr-&gt;tpage = aux_tpage;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    psSpr-&gt;w = aux_w;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    psSpr-&gt;x = aux_x;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;}</div><div class="ttc" id="_gfx_8h_html_a06fc87d81c62e9abb8790b6e5713c55baafea7185585f9a73335f358814395083"><div class="ttname"><a href="_gfx_8h.html#a06fc87d81c62e9abb8790b6e5713c55baafea7185585f9a73335f358814395083">X_SCREEN_RESOLUTION</a></div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8h_source.html#l00042">Gfx.h:42</a></div></div>
<div class="ttc" id="_gfx_8c_html_a936466f5b81ac511dc91604521f828e5"><div class="ttname"><a href="_gfx_8c.html#a936466f5b81ac511dc91604521f828e5">MAX_SIZE_FOR_GSSPRITE</a></div><div class="ttdeci">#define MAX_SIZE_FOR_GSSPRITE</div><div class="ttdoc">Maximum size for a GsSprite instance supported by PSX hardware. </div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00042">Gfx.c:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a72f4e362f546c1b668eb247f09e7799e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72f4e362f546c1b668eb247f09e7799e">&#9670;&nbsp;</a></span>GfxSortSprite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GfxSortSprite </td>
          <td>(</td>
          <td class="paramtype">const GsSprite *const&#160;</td>
          <td class="paramname"><em>psSpr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extracting information from tSprite instance, this function adds a low-level GsSprite structure into internal primitive list if inside drawing environment area. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">psSpr</td><td>Index of low-level sprite structure inside internal array.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd>Sprites bigger than 256x256 px are also supported. Internally, GfxSortBigSprite draws two primitive, so up to 512x256 px primitives are supported.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="_gfx_8c.html#a5857b09e918d24ea68d34da8b16e667b" title="Processes big sprites (e.g.: more than 256 px wide) by drawing two separate primitives. ">GfxSortBigSprite()</a> to see how big sprites are handled. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_gfx_8c_source.html#l00308">308</a> of file <a class="el" href="_gfx_8c_source.html">Gfx.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;{</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="_gfx_8c.html#a41f30eb46c140f8058066c267cc6545d">GfxIsSpriteInsideScreenArea</a>(psSpr) != <span class="keyword">false</span>)</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="comment">/* Small sprites can be directly drawn using PSXSDK function.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">         * On the other hand, big sprites need some more processing. */</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        psSpr-&gt;w &lt; <a class="code" href="_gfx_8c.html#a936466f5b81ac511dc91604521f828e5">MAX_SIZE_FOR_GSSPRITE</a> ? <a class="code" href="_gfx_8c.html#a5857b09e918d24ea68d34da8b16e667b">GfxSortBigSprite</a>((GsSprite* <span class="keyword">const</span>)psSpr) : GsSortSprite(psSpr);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="comment">/* Sprite is outside drawing environment area. Exit. */</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    }</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div><div class="ttc" id="_gfx_8c_html_a41f30eb46c140f8058066c267cc6545d"><div class="ttname"><a href="_gfx_8c.html#a41f30eb46c140f8058066c267cc6545d">GfxIsSpriteInsideScreenArea</a></div><div class="ttdeci">bool GfxIsSpriteInsideScreenArea(const GsSprite *const psSpr)</div><div class="ttdoc">Indicates whether a tSprite instance is inside active drawing environment area. </div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00279">Gfx.c:279</a></div></div>
<div class="ttc" id="_gfx_8c_html_a5857b09e918d24ea68d34da8b16e667b"><div class="ttname"><a href="_gfx_8c.html#a5857b09e918d24ea68d34da8b16e667b">GfxSortBigSprite</a></div><div class="ttdeci">static void GfxSortBigSprite(GsSprite *const psSpr)</div><div class="ttdoc">Processes big sprites (e.g.: more than 256 px wide) by drawing two separate primitives. </div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00332">Gfx.c:332</a></div></div>
<div class="ttc" id="_gfx_8c_html_a936466f5b81ac511dc91604521f828e5"><div class="ttname"><a href="_gfx_8c.html#a936466f5b81ac511dc91604521f828e5">MAX_SIZE_FOR_GSSPRITE</a></div><div class="ttdeci">#define MAX_SIZE_FOR_GSSPRITE</div><div class="ttdoc">Maximum size for a GsSprite instance supported by PSX hardware. </div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00042">Gfx.c:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab288de79dcfcde0c4d41a9eeefae9300"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab288de79dcfcde0c4d41a9eeefae9300">&#9670;&nbsp;</a></span>GfxSpriteFromFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool GfxSpriteFromFile </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>strFilePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GsSprite *const&#160;</td>
          <td class="paramname"><em>pSpr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads data from file indicated by strFilePath, uploads it into VRAM and sets up a new GsSprite instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">strFilePath</td><td>Absolute file path e.g.: "cdrom:\\DATA\\SPRITES\\TILESET1.TIM;1".</td></tr>
    <tr><td class="paramname">pSpr</td><td>Pointer to sprite to be filled with image data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns true when tasks could be made successfully, false otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="_i_o_8c.html#a73e7d9910882697900461f653ecbea6d" title="Loads a file with absolute file path indicated by strFileName. ">IOLoadFile()</a> for file I/O handling implementation. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_gfx_8c_source.html#l00141">141</a> of file <a class="el" href="_gfx_8c_source.html">Gfx.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">/* File size in bytes. Modified by IOLoadFile(). */</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordtype">size_t</span> eSize;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">/* Get buffer address where file data is contained. */</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keyword">const</span> uint8_t* <span class="keyword">const</span> pu8Buffer = <a class="code" href="_i_o_8c.html#a73e7d9910882697900461f653ecbea6d">IOLoadFile</a>(strFilePath, &amp;eSize);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> (    (pu8Buffer != NULL)</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                    &amp;&amp;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            (eSize != <a class="code" href="_i_o_8h.html#a45d8a6a675b3b0e6bd1a772120ddf30c">IO_INVALID_FILE_SIZE</a>) )</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="comment">/* File was loaded successfully into buffer.</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">         * Now read buffer data and upload it to VRAM. */</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="comment">/* Declare a GsImage instance, needed by GsImageFromTim(). */</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        GsImage sGsi;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">if</span> (GsImageFromTim(&amp;sGsi, pu8Buffer) == 1 <span class="comment">/* Success code. */</span>)</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <span class="keyword">enum</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                UPLOAD_IMAGE_FLAG = 1</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            };</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <span class="comment">/* sGsi is now filled with data. Create</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">             * a GsSprite instance from it. */</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="comment">/* Call PSXSDK libs to upload image data to VRAM. &quot;const&quot; flag must be removed. */</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">if</span> (GsSpriteFromImage((GsSprite*)pSpr, &amp;sGsi, UPLOAD_IMAGE_FLAG) == 1 <span class="comment">/* Success code. */</span>)</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                <span class="comment">/* Return success code. */</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                <span class="comment">/* Something went wrong when obtaining data</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">                 * from GsImage instance. Fall through. */</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="comment">/* Something went wrong when obtaining *.TIM data.</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">             * Fall through. */</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="comment">/* Something went wrong when loading the file. Fall through. */</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">/* Return failure code if reached here. */</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div><div class="ttc" id="_i_o_8c_html_a73e7d9910882697900461f653ecbea6d"><div class="ttname"><a href="_i_o_8c.html#a73e7d9910882697900461f653ecbea6d">IOLoadFile</a></div><div class="ttdeci">const uint8_t * IOLoadFile(const char *const strFilePath, size_t *const peSize)</div><div class="ttdoc">Loads a file with absolute file path indicated by strFileName. </div><div class="ttdef"><b>Definition:</b> <a href="_i_o_8c_source.html#l00071">IO.c:71</a></div></div>
<div class="ttc" id="_i_o_8h_html_a45d8a6a675b3b0e6bd1a772120ddf30c"><div class="ttname"><a href="_i_o_8h.html#a45d8a6a675b3b0e6bd1a772120ddf30c">IO_INVALID_FILE_SIZE</a></div><div class="ttdeci">#define IO_INVALID_FILE_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_i_o_8h_source.html#l00025">IO.h:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9f1c010ef7f6b7f933fa0f607c953b23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f1c010ef7f6b7f933fa0f607c953b23">&#9670;&nbsp;</a></span>GfxSwapBuffers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void GfxSwapBuffers </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs double buffering. </p>
<p>Double buffering consists of swapping drawing and display environments Y position, so that the display environment is showing current frame, whereas the drawing environment is calculating the next frame. </p>

<p class="definition">Definition at line <a class="el" href="_gfx_8c_source.html#l00464">464</a> of file <a class="el" href="_gfx_8c_source.html">Gfx.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;{</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keyword">enum</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        DOUBLE_BUFFERING_SWAP_Y = 256</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    };</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="_gfx_8c.html#af0fb7d0e979d92a1ad0c5f2a04722412">sDispEnv</a>.y == 0)</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <a class="code" href="_gfx_8c.html#af0fb7d0e979d92a1ad0c5f2a04722412">sDispEnv</a>.y = DOUBLE_BUFFERING_SWAP_Y;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <a class="code" href="_gfx_8c.html#abb76f0115d46d74894915a38e0f29498">sDrawEnv</a>.y = 0;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_gfx_8c.html#af0fb7d0e979d92a1ad0c5f2a04722412">sDispEnv</a>.y == DOUBLE_BUFFERING_SWAP_Y)</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <a class="code" href="_gfx_8c.html#af0fb7d0e979d92a1ad0c5f2a04722412">sDispEnv</a>.y = 0;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="_gfx_8c.html#abb76f0115d46d74894915a38e0f29498">sDrawEnv</a>.y = DOUBLE_BUFFERING_SWAP_Y;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">/* Update drawing and display environments</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">     * with new calculated Y position. */</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    GsSetDispEnv(&amp;<a class="code" href="_gfx_8c.html#af0fb7d0e979d92a1ad0c5f2a04722412">sDispEnv</a>);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    GsSetDrawEnv(&amp;<a class="code" href="_gfx_8c.html#abb76f0115d46d74894915a38e0f29498">sDrawEnv</a>);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;}</div><div class="ttc" id="_gfx_8c_html_af0fb7d0e979d92a1ad0c5f2a04722412"><div class="ttname"><a href="_gfx_8c.html#af0fb7d0e979d92a1ad0c5f2a04722412">sDispEnv</a></div><div class="ttdeci">static GsDispEnv sDispEnv</div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00064">Gfx.c:64</a></div></div>
<div class="ttc" id="_gfx_8c_html_abb76f0115d46d74894915a38e0f29498"><div class="ttname"><a href="_gfx_8c.html#abb76f0115d46d74894915a38e0f29498">sDrawEnv</a></div><div class="ttdeci">static GsDrawEnv sDrawEnv</div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00059">Gfx.c:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae12c39045683977189ae652180a4f078"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae12c39045683977189ae652180a4f078">&#9670;&nbsp;</a></span>ISR_VBlank()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ISR_VBlank </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function is executed on VSYNC event. </p>
<p>Game runs at a fixed rate of 50 Hz (if PAL) or 60 Hz (NTSC), so if CPU has finished calculating the new scene, it must wait for this interrupt to be triggered so the game runs at desired frame rate. </p>

<p class="definition">Definition at line <a class="el" href="_gfx_8c_source.html#l00498">498</a> of file <a class="el" href="_gfx_8c_source.html">Gfx.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;{</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> bState;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="comment">/* Set VSYNC flag. */</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="_gfx_8c.html#a9fdcfdea7090bac4a1c93629c7bb7c7c">bSyncFlag</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">if</span> ((bState = !bState))</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordtype">void</span>* <span class="keyword">const</span> pSubThreadTCB = (*(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>**)0x110) + (0xC0 / <span class="keyword">sizeof</span> (<span class="keywordtype">void</span>*));</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        **(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>**)0x108 = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)pSubThreadTCB;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        **(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>**)0x108 = *(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>*)0x110;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    }</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div><div class="ttc" id="_gfx_8c_html_a9fdcfdea7090bac4a1c93629c7bb7c7c"><div class="ttname"><a href="_gfx_8c.html#a9fdcfdea7090bac4a1c93629c7bb7c7c">bSyncFlag</a></div><div class="ttdeci">static volatile bool bSyncFlag</div><div class="ttdef"><b>Definition:</b> <a href="_gfx_8c_source.html#l00067">Gfx.c:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a9fdcfdea7090bac4a1c93629c7bb7c7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fdcfdea7090bac4a1c93629c7bb7c7c">&#9670;&nbsp;</a></span>bSyncFlag</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool bSyncFlag</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_gfx_8c_source.html#l00067">67</a> of file <a class="el" href="_gfx_8c_source.html">Gfx.c</a>.</p>

</div>
</div>
<a id="af0fb7d0e979d92a1ad0c5f2a04722412"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0fb7d0e979d92a1ad0c5f2a04722412">&#9670;&nbsp;</a></span>sDispEnv</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">GsDispEnv sDispEnv</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_gfx_8c_source.html#l00064">64</a> of file <a class="el" href="_gfx_8c_source.html">Gfx.c</a>.</p>

</div>
</div>
<a id="abb76f0115d46d74894915a38e0f29498"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb76f0115d46d74894915a38e0f29498">&#9670;&nbsp;</a></span>sDrawEnv</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">GsDrawEnv sDrawEnv</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_gfx_8c_source.html#l00059">59</a> of file <a class="el" href="_gfx_8c_source.html">Gfx.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="_gfx_8c.html">Gfx.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
